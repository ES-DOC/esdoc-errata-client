

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Usage &mdash; ESGF-ISSUE-CLIENT 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ESGF-ISSUE-CLIENT 0.1 documentation" href="index.html" />
    <link rel="next" title="Frequently asked questions" href="faq.html" />
    <link rel="prev" title="Configuration" href="configuration.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="faq.html" title="Frequently asked questions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuration"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ESGF-ISSUE-CLIENT 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="usage">
<span id="id1"></span><h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="generic-commands">
<h2>Generic commands<a class="headerlink" href="#generic-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="check-the-help">
<h3>Check the help<a class="headerlink" href="#check-the-help" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager -h

 usage: esgissue <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-V<span class="o">]</span>  ...

 The publication workflow on the ESGF nodes requires to deal with errata issues.
 The cause behind the version changes has to be published alongside the data: what was updated,
 retracted or removed, and why. Consequently, the publication of a new version of a dataset has to
 be motivated by an issue.

 <span class="s2">&quot;issue-manager&quot;</span> allows the referenced data providers to easily create, document, update, close or
 remove a validated issue. The issue registration always appears prior to the publication process and
 should be mandatory <span class="k">for </span>additional version, version removal or retraction.

 <span class="s2">&quot;issue-manager&quot;</span> works with both json and txt files. This allows the data provider in charge of ESGF
 issues to manage one or several json templates gathering the issues locally.

 See full documentation on http://esgissue.readthedocs.org/

 Optional arguments:
   -h, --help  Show this <span class="nb">help </span>message and exit.

   -V          Program version.

 Issue actions:

     create    Creates ESGF issues from a json template to the errata database.
               See <span class="s2">&quot;issue-manager create -h&quot;</span> <span class="k">for </span>full help.

     update    Updates ESGF issues from a json template to the errata database.
               See <span class="s2">&quot;issue-manager update -h&quot;</span> <span class="k">for </span>full help.

     close     Closes ESGF issues on the errata repository.
               See <span class="s2">&quot;issue-manager close -h&quot;</span> <span class="k">for </span>full help.

     retrieve  Retrieves ESGF issues from the errata repository to a json template.
               See <span class="s2">&quot;issue-manager retrieve -h&quot;</span> <span class="k">for </span>full help.

 Developed by:
 Levavasseur, G. <span class="o">(</span>UPMC/IPSL - glipsl@ipsl.jussieu.fr<span class="o">)</span>
 Bennasser, A. <span class="o">(</span>UPMC/IPSL - abennasser@ipsl.jussieu.fr
</pre></div>
</div>
</div>
<div class="section" id="create-an-issue">
<h3>Create an issue<a class="headerlink" href="#create-an-issue" title="Permalink to this headline">¶</a></h3>
<p>Issue creation is the first step in the issue life cycle, and is a vital part of the errata service as it revolves around
community contributions.
However, creating an issue must abide to a set of rules enforced by the json validation.</p>
<p>Mandatory issue json file fields:</p>
<blockquote>
<div><ul class="simple">
<li>title,</li>
<li>description,</li>
<li>severity,</li>
<li>models</li>
</ul>
</div></blockquote>
<p>dataset list txt file should not be empty, otherwise the command will raise an exception and exit.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the log argument is optional, if not used, the standard output will be used.</p>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager create --issue /path/to/issue.json --dsets /path/to/datasets.txt --log /path/to/logfile


 2016/09/06 11:00:50 AM INFO Validating of issue...
 2016/09/06 11:00:51 AM INFO Validation Result: SUCCESSFUL
 2016/09/06 11:00:51 AM INFO Requesting issue <span class="c">#03c2e168-7418-443b-82e7-c5d398366144 creation from errata service...</span>
 2016/09/06 11:00:51 AM INFO Updating fields of payload after remote issue creation...
 2016/09/06 11:00:51 AM INFO Issue json schema has been updated, persisting in file...
 2016/09/06 11:00:51 AM INFO Issue file has been created successfully!
</pre></div>
</div>
<p>If the issue.json or dsets.txt file is missing from options:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager create --dsets esgissue/samples/dsets1.txt

 issue-manager create --dsets esgissue/samples/dsets1.txt usage: esgissue create <span class="o">[</span>--log <span class="o">[</span><span class="nv">$PWD</span><span class="o">]]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-h<span class="o">]</span> --issue <span class="o">[</span>PATH/issue.json<span class="o">]</span> --dsets <span class="o">[</span>PATH/dsets.list<span class="o">]</span>
 esgissue create: error: argument --issue is required
</pre></div>
</div>
<p>If a the the issue json file is not properly formed as described in the json templates:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager create --issue /path/to/issue_missing_title.json --dsets /path/to/datasets.txt --log /path/to/logfile

 - Missing title <span class="o">(</span>applies to all mandatory parameters<span class="o">)</span>:
 2016/09/06 12:06:06 PM INFO Validating of issue...
 2016/09/06 12:06:06 PM ERROR Validation error: u<span class="s1">&#39;title&#39;</span> is a required property <span class="k">for </span>required, <span class="k">while </span>validating deque<span class="o">([])</span>.
 2016/09/06 12:06:06 PM ERROR The responsible schema part is: <span class="o">{</span>u<span class="s1">&#39;title&#39;</span>: u<span class="s1">&#39;ESGF issue json schema&#39;</span>, u<span class="s1">&#39;required&#39;</span>: <span class="o">[</span>u<span class="s1">&#39;dateCreated&#39;</span>, u<span class="s1">&#39;title&#39;</span>, u<span class="s1">&#39;description&#39;</span>, u<span class="s1">&#39;severity&#39;</span>, u<span class="s1">&#39;project&#39;</span>, u<span class="s1">&#39;models&#39;</span>, u<span class="s1">&#39;datasets&#39;</span>, u<span class="s1">&#39;variables&#39;</span>, u<span class="s1">&#39;experiments&#39;</span><span class="o">]</span>, u<span class="s1">&#39;additionalProperties&#39;</span>: False, u<span class="s1">&#39;$schema&#39;</span>: u<span class="s1">&#39;http://json-schema.org/schema#&#39;</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;object&#39;</span>, u<span class="s1">&#39;properties&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;status&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;enum&#39;</span>: <span class="o">[</span>u<span class="s1">&#39;new&#39;</span>, u<span class="s1">&#39;onhold&#39;</span>, u<span class="s1">&#39;wontfix&#39;</span>, u<span class="s1">&#39;resolved&#39;</span><span class="o">]</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;datasets&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minItems&#39;</span>: 1, u<span class="s1">&#39;items&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;uniqueItems&#39;</span>: True, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;array&#39;</span><span class="o">}</span>, u<span class="s1">&#39;severity&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;enum&#39;</span>: <span class="o">[</span>u<span class="s1">&#39;low&#39;</span>, u<span class="s1">&#39;medium&#39;</span>, u<span class="s1">&#39;high&#39;</span>, u<span class="s1">&#39;critical&#39;</span><span class="o">]</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;title&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;institute&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;variables&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;uniqueItems&#39;</span>: True, u<span class="s1">&#39;items&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;array&#39;</span><span class="o">}</span>, u<span class="s1">&#39;dateCreated&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span>, u<span class="s1">&#39;format&#39;</span>: u<span class="s1">&#39;date-time&#39;</span><span class="o">}</span>, u<span class="s1">&#39;project&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;enum&#39;</span>: <span class="o">[</span>u<span class="s1">&#39;cmip5&#39;</span>, u<span class="s1">&#39;cmip6&#39;</span><span class="o">]</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;models&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;uniqueItems&#39;</span>: True, u<span class="s1">&#39;items&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;array&#39;</span><span class="o">}</span>, u<span class="s1">&#39;materials&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;uniqueItems&#39;</span>: True, u<span class="s1">&#39;items&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;pattern&#39;</span>: u<span class="s1">&#39;\\.(jpg|gif|png|tiff)$&#39;</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;array&#39;</span><span class="o">}</span>, u<span class="s1">&#39;url&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;uid&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;pattern&#39;</span>: u<span class="s1">&#39;^[0-9a-f]{8}(-[0-9a-f]{4}){3}-[0-9a-f]{12}$&#39;</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;experiments&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;uniqueItems&#39;</span>: True, u<span class="s1">&#39;items&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;array&#39;</span><span class="o">}</span>, u<span class="s1">&#39;description&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}}}</span>
</pre></div>
</div>
<p>If the dataset list txt file is empty:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager create --issue /path/to/issue.json --dsets /path/to/empty_dataset_list.txt --log /path/to/logfile

 2016/09/06 12:24:15 PM INFO Validating of issue...
 2016/09/06 12:24:15 PM ERROR Validation error: <span class="o">[]</span> is too short <span class="k">for </span>minItems, <span class="k">while </span>validating deque<span class="o">([</span>u<span class="s1">&#39;datasets&#39;</span><span class="o">])</span>.
 2016/09/06 12:24:15 PM ERROR The responsible schema part is: <span class="o">{</span>u<span class="s1">&#39;minItems&#39;</span>: 1, u<span class="s1">&#39;items&#39;</span>: <span class="o">{</span>u<span class="s1">&#39;minLength&#39;</span>: 1, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;string&#39;</span><span class="o">}</span>, u<span class="s1">&#39;uniqueItems&#39;</span>: True, u<span class="s1">&#39;type&#39;</span>: u<span class="s1">&#39;array&#39;</span><span class="o">}</span>
</pre></div>
</div>
<p>If the dataset list txt file contains malformed dataset_ids:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager create --issue /path/to/issue.json --dsets /path/to/malformed_datasets.txt --log /path/to/logfile

 2016/09/06 03:15:50 PM INFO Validating of issue...
 2016/09/06 03:15:51 PM ERROR Validation Result: FAILED // Dataset IDs have invalid format, error code: 3
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On success the local issue file will be modified, so please make sure the client has sufficient writing rights
to the file. The creation and update dates will be appended as well as the issue uid and status.</p>
</div>
</div>
<div class="section" id="update-an-issue">
<h3>Update an issue<a class="headerlink" href="#update-an-issue" title="Permalink to this headline">¶</a></h3>
<p>Once an issue is created, it will be subject to some changes, whether it regards the content of the issue (description
for instance) or the status of the issue (changing status). The update of an issue is a key part of the issue life-cycle.</p>
<p>The update command has a similar structure as the creation command, and also similar constraints, plus a few more that
will be detailed here.</p>
<p>Some attributes cannot be changed. If a mistake occurred while declaring the issue, it should be reported to the admins.
These attributes consist in:</p>
<ul class="simple">
<li>Title</li>
<li>Project</li>
<li>Institute.</li>
</ul>
<p>As well as the key dates in the issue file (creation, update, closed dates), those should not be modified in order to
preserve an authentic set of records, in case of compromised local records users can use the retrieve command to download
fresh copies from the errata server.</p>
<p>Another major additional constraint is the modification of the issue description. As a matter of fact updating the
description is controlled by a variation threshold that should not be exceeded. Which is currently set at 20%, if the
description is to be changed more than that, the issue should be closed and the creation of a brand new issue is required.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager update --issue /path/to/issue.json --dsets /path/to/new_datasets.txt --log /path/to/logfile


 2016/09/06 05:45:14 PM INFO Validating of issue...
 2016/09/06 05:45:15 PM INFO Validation Result: SUCCESSFUL
 2016/09/06 05:45:15 PM INFO Update issue <span class="c">#66b1b471-221a-42ac-ad69-0a048e924cd4</span>
 2016/09/06 05:45:15 PM INFO Issue has been updated successfully!
</pre></div>
</div>
<p>If a the issue.json or dsets.txt file is missing from options:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager update --dsets esgissue/samples/dsets1.txt

 issue-manager update --dsets esgissue/samples/dsets1.txt usage: esgissue update <span class="o">[</span>--log <span class="o">[</span><span class="nv">$PWD</span><span class="o">]]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-h<span class="o">]</span> --issue <span class="o">[</span>PATH/issue.json<span class="o">]</span> --dsets <span class="o">[</span>PATH/dsets.list<span class="o">]</span>
 esgissue update: error: argument --issue is required
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The previously explained safeguards for the issue creation are also valid in the update context, empty dataset
lists are rejected as well as malformed dataset ids. The issue json should always be conform to the templates otherwise
an exception will be thrown.</p>
</div>
</div>
<div class="section" id="close-an-issue">
<h3>Close an issue<a class="headerlink" href="#close-an-issue" title="Permalink to this headline">¶</a></h3>
<p>At the end of an issue&#8217;s lifecycle, it should be marked as a closed issue, in order to prevent confusion.
To do so a specific close command is made available in the errata client.
.. note:: To close an issue it should not have a status Wont_fix or New.</p>
<p>The close command has a similar structure to the creation and update.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager close --issue /path/to/issue.json --dsets /path/to/new_datasets.txt --log /path/to/logfile

 2016/09/06 06:27:53 PM INFO Validating of issue...
 2016/09/06 06:27:53 PM INFO Validation Result: SUCCESSFUL
 2016/09/06 06:27:53 PM INFO Closing issue <span class="c">#66b1b471-221a-42ac-ad69-0a048e924cd4</span>
 2016/09/06 06:27:53 PM INFO Issue has been closed successfully!
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The close command also modifies the issue files by adding the close date and changing the status.</p>
</div>
</div>
<div class="section" id="retrieving-issues">
<h3>Retrieving issues:<a class="headerlink" href="#retrieving-issues" title="Permalink to this headline">¶</a></h3>
<p>At some point it might be a good idea to keep a local copy of the errata information hosted within the errata system.
The retrieve command has been designed in the aim of either downloading a specific issue files, a set of specific issues,
or the whole lot of issues hosted within the errata system (for archiving purposes for example).</p>
<p>The command takes as arguments the list of uids (optional, leave blank if all issues are expected), the json file directory
and the dataset list txt file directory the user wishes to use.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">in case of multiple issues download it is mandatory the path provided for issues and directories be a directory.
In the case of a single issue download, a json and txt file would be sufficient.</p>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager retrieve --issue esgissue/samples/downloads --dsets esgissue/samples/downloads
--id 66b1b471-221a-42ac-ad69-0a048e924cd4

2016/09/06 06:44:28 PM INFO processing id 66b1b471-221a-42ac-ad69-0a048e924cd4
2016/09/06 06:44:28 PM INFO Issue has been downloaded.
</pre></div>
</div>
<p>This command the issue with id #66b1b471-221a-42ac-ad69-0a048e924cd4 has been downloaded to the downloads directory.
The naming convention used in creating the issue related files is issue_&lt;uid&gt;.json &amp; dset_&lt;uid&gt;.txt</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">if needed we could have specified json and txt file in this example since we are downloading a single issue.</p>
</div>
<p>Multiple downloads:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span> issue-manager retrieve --issue esgissue/samples/downloads --dsets esgissue/samples/downloads
--id 66b1b471-221a-42ac-ad69-0a048e924cd4 8f8178db-d772-449d-86d2-90385479f8e6

2016/09/06 06:49:39 PM INFO processing id 66b1b471-221a-42ac-ad69-0a048e924cd4
2016/09/06 06:49:39 PM INFO Issue has been downloaded.
2016/09/06 06:49:39 PM INFO processing id 8f8178db-d772-449d-86d2-90385479f8e6
2016/09/06 06:49:39 PM INFO Issue has been downloaded.
</pre></div>
</div>
<p>Multiple downloads with file instead of directory as argument:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$&gt;</span>issue-manager retrieve --issue esgissue/samples/issue.json --dsets esgissue/samples/dset.txt
--id 66b1b471-221a-42ac-ad69-0a048e924cd4 8f8178db-d772-449d-86d2-90385479f8e6

You have provided multiple ids but a single file as destination, aborting.
</pre></div>
</div>
<div class="section" id="example">
<h4>Example:<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>These are concrete examples of what an issue declaration through the esgf issue client should look like:</p>
<p>issue.json:</p>
<p>On declaration of the issue this is the regular form of an issue.</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;project&quot;</span><span class="p">:</span> <span class="s2">&quot;cmip5&quot;</span><span class="p">,</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;SampleIssueTitle&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a test description, void of meaning.&quot;</span><span class="p">,</span>
    <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span>
    <span class="nt">&quot;materials&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time.jpg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time5.jpg&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://websitetest.com&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>datasets.txt:</p>
<div class="highlight-txt"><pre>cmip5.output1.IPSL.IPSL-CM5A-MR.historical.mon.land.Lmon.r1i1p1#20111119
cmip5.output1.IPSL.IPSL-CM5A-MR.historical.mon.land.Lmon.r2i2p2#20121212</pre>
</div>
<p>After having successfully formatted the both files in the indicated fashion, creating an issue using the create command
will result in the modification of the local issue file.</p>
<p>issue.json:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;project&quot;</span><span class="p">:</span> <span class="s2">&quot;cmip5&quot;</span><span class="p">,</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;SampleIssueTitle&quot;</span><span class="p">,</span>
    <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dateCreated&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-10-21 10:42:09&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dateUpdated&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-10-21 10:42:09&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a test description, void of meaning.&quot;</span><span class="p">,</span>
    <span class="nt">&quot;experiments&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;historical&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;institute&quot;</span><span class="p">:</span> <span class="s2">&quot;ipsl&quot;</span><span class="p">,</span>
    <span class="nt">&quot;materials&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time.jpg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time5.jpg&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;models&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;ipsl-cm5a-mr&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;new&quot;</span><span class="p">,</span>
    <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;aff92796-ce6c-42ec-bc6b-341006ff13d6&quot;</span><span class="p">,</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://websitetest.com&quot;</span><span class="p">,</span>
    <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;lmon&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The life cycle of an issue may incorporate a few changes within the contents of an issue.
To do so, the user needs to use the update command of the client, with a modified issue json and/or dataset txt file.
The json file needs to be at contain the same fields as in after the creation action. If your local file is corrupted
consider using the retrieve command to download a fresh copy.</p>
<p>issue.json:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;dateCreated&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-10-21 10:42:09&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dateUpdated&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-10-21 10:42:09&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a test description, void of meaning, however this is an updated description.&quot;</span><span class="p">,</span>
    <span class="nt">&quot;experiments&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;historical&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;institute&quot;</span><span class="p">:</span> <span class="s2">&quot;ipsl&quot;</span><span class="p">,</span>
    <span class="nt">&quot;materials&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time.jpg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time5.jpg&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;models&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;ipsl-cm5a-mr&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="nt">&quot;project&quot;</span><span class="p">:</span> <span class="s2">&quot;cmip5&quot;</span><span class="p">,</span>
    <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;onhold&quot;</span><span class="p">,</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;SampleIssueTitle&quot;</span><span class="p">,</span>
    <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;aff92796-ce6c-42ec-bc6b-341006ff13d6&quot;</span><span class="p">,</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://websitetest.com&quot;</span><span class="p">,</span>
    <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;lmon&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>dataset.txt:</p>
<div class="highlight-txt"><pre>cmip5.output1.IPSL.IPSL-CM5A-MR.historical.mon.land.Lmon.r1i1p1#20111119
cmip5.output1.IPSL.IPSL-CM5A-MR.historical.mon.land.Lmon.r2i2p2#20121212
cmip5.output1.IPSL.IPSL-CM5A-LR.historical.3hr.atmos.Lmon.r3i2p3#20121212
cmip5.output1.IPSL.IPSL-CM5A-LR.historical.6hr.atmos.Lmon.r2i5p4#20121212</pre>
</div>
<p>We altered the description of the issue, the severity, the workflow status and added 2 new affected datasets, which belong
to another model (IPSL-CM5A-LR). This will lead to an updated issue json file as follows:</p>
<p>issue.json:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;dateCreated&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-10-21 10:42:09&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dateUpdated&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-10-21 12:41:47&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a test description, void of meaning, however this is an updated description.&quot;</span><span class="p">,</span>
    <span class="nt">&quot;experiments&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;historical&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;institute&quot;</span><span class="p">:</span> <span class="s2">&quot;ipsl&quot;</span><span class="p">,</span>
    <span class="nt">&quot;materials&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time.jpg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time5.jpg&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;models&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;ipsl-cm5a-mr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ipsl-cm5a-lr&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;project&quot;</span><span class="p">:</span> <span class="s2">&quot;cmip5&quot;</span><span class="p">,</span>
    <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;onhold&quot;</span><span class="p">,</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;SampleIssueTitle&quot;</span><span class="p">,</span>
    <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;aff92796-ce6c-42ec-bc6b-341006ff13d6&quot;</span><span class="p">,</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://websitetest.com&quot;</span><span class="p">,</span>
    <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;lmon&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The updates now are registered both in the remote errata service and in are reflected in the local issue files (added model detected in dataset ids).</p>
<p>The final step remaining in the life cycle of the issue is either to close the issue and mark it as done with, or flag it as a wontfix, that will however keep the issue
open for other users to be careful about the affected files in future use. To mark it as a wontfix, an update as shown above is sufficient.
To close an issue, users are required to use the client&#8217;s close command. Which will mark issue as closed in the remote errata service and reflect this change in the local
files in coherence with every step in the issue life cycle.</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;dateClosed&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-10-21 12:41:47&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dateCreated&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-10-21 10:42:09&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dateUpdated&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-10-21 12:41:47&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a test description, void of meaning, however this is an updated description.&quot;</span><span class="p">,</span>
    <span class="nt">&quot;experiments&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;historical&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;institute&quot;</span><span class="p">:</span> <span class="s2">&quot;ipsl&quot;</span><span class="p">,</span>
    <span class="nt">&quot;materials&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time.jpg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://errata.ipsl.upmc.fr/static/images_errata/time5.jpg&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;models&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;ipsl-cm5a-mr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ipsl-cm5a-lr&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;project&quot;</span><span class="p">:</span> <span class="s2">&quot;cmip5&quot;</span><span class="p">,</span>
    <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;resolved&quot;</span><span class="p">,</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;SampleIssueTitle&quot;</span><span class="p">,</span>
    <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;aff92796-ce6c-42ec-bc6b-341006ff13d6&quot;</span><span class="p">,</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://websitetest.com&quot;</span><span class="p">,</span>
    <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;lmon&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The issue is now closed and is kept for archiving/consultation purposes.</p>
</div>
<div class="section" id="exit-status">
<h4>Exit status:<a class="headerlink" href="#exit-status" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>[0]: Successful execution of the requested task,</li>
<li>[1]: Missing or invalid title,</li>
<li>[2]: Missing or invalid description,</li>
<li>[3]: Missing or invalid datasets,</li>
<li>[4]: Missing or invalid severity,</li>
<li>[5]: Missing or invalid project,</li>
<li>[6]: Missing or invalid models,</li>
<li>[7]: Missing or invalid status,</li>
<li>[8]: Missing or invalid institute,</li>
<li>[9]: Missing or invalid materials,</li>
<li>[10]: Missing or invalid urls,</li>
<li>[11]: Missing or invalid id (uid),</li>
<li>[12]: Missing or invalid creation date,</li>
<li>[13]: Missing or invalid update date,</li>
<li>[14]: Missing or invalid close date.</li>
<li>[15]: Incoherent dataset id with project drs structure, please make sure both are coherent.</li>
<li>[16]: Multiple facet declaration in issue creation/update not permitted (e.g. multiple institutes detected)</li>
<li>[99]: An unexpected error has caused the task to fail. Check the error message for fix and/or contact the developers.</li>
</ul>
<p>See full documentation on <a class="reference external" href="http://esgissue.readthedocs.org/">http://esgissue.readthedocs.org/</a></p>
<p>The default values are displayed next to the corresponding flags.</p>
<dl class="docutils">
<dt>Positional arguments:</dt>
<dd>command                               One of the four possible actions, create, update, close and retrieve.</dd>
<dt>Optional arguments:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--issue</span></kbd></td>
<td>Issue json file.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--dsets</span></kbd></td>
<td>dataset list txt file.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--log</span></kbd></td>
<td>Directory for log output.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></td>
<td>Show this help message and exit.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-V</span></kbd></td>
<td>Program version.</td></tr>
</tbody>
</table>
</dd>
</dl>
<p>Developed by:
Levavasseur, G. (UPMC/IPSL - <a class="reference external" href="mailto:glipsl&#37;&#52;&#48;ipsl&#46;jussieu&#46;fr">glipsl<span>&#64;</span>ipsl<span>&#46;</span>jussieu<span>&#46;</span>fr</a>)
Ben Nasser, A. (IPSL - <a class="reference external" href="mailto:abennasser&#37;&#52;&#48;ipsl&#46;jussieu&#46;fr">abennasser<span>&#64;</span>ipsl<span>&#46;</span>jussieu<span>&#46;</span>fr</a>)</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Usage</a><ul>
<li><a class="reference internal" href="#generic-commands">Generic commands</a><ul>
<li><a class="reference internal" href="#check-the-help">Check the help</a></li>
<li><a class="reference internal" href="#create-an-issue">Create an issue</a></li>
<li><a class="reference internal" href="#update-an-issue">Update an issue</a></li>
<li><a class="reference internal" href="#close-an-issue">Close an issue</a></li>
<li><a class="reference internal" href="#retrieving-issues">Retrieving issues:</a><ul>
<li><a class="reference internal" href="#example">Example:</a></li>
<li><a class="reference internal" href="#exit-status">Exit status:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="configuration.html"
                        title="previous chapter">Configuration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="faq.html"
                        title="next chapter">Frequently asked questions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/usage.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="faq.html" title="Frequently asked questions"
             >next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuration"
             >previous</a> |</li>
        <li><a href="index.html">ESGF-ISSUE-CLIENT 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Atef BEN NASSER, Guillaume LEVAVASSEUR.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>